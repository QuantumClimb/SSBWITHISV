# Annotation Panel - Visual Guide

## ğŸ¨ New Layout Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚                                                         â”‚
â”‚            3D MODEL & ANNOTATION CANVAS                â”‚
â”‚                                                         â”‚
â”‚                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                        â”‚ LEFT PANEL   â”‚ â”‚
â”‚                                        â”‚ (NEW)        â”‚ â”‚
â”‚                  CANVAS                â”‚              â”‚ â”‚
â”‚                                        â”‚ â€¢ Tool Sel.  â”‚ â”‚
â”‚                                        â”‚ â€¢ Colors     â”‚ â”‚
â”‚                                        â”‚ â€¢ Width      â”‚ â”‚
â”‚                                        â”‚ â€¢ Preview    â”‚ â”‚
â”‚                                        â”‚ â€¢ Presets    â”‚ â”‚
â”‚                                        â”‚ â€¢ Actions    â”‚ â”‚
â”‚                                        â”‚ â€¢ Shortcuts  â”‚ â”‚
â”‚                                        â”‚              â”‚ â”‚
â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                            â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                            â””â”€â”‚ MAIN   â”‚ â”‚
â”‚                                              â”‚ TOOLBARâ”‚ â”‚
â”‚                                              â”‚ (right)â”‚ â”‚
â”‚                                              â”‚        â”‚ â”‚
â”‚                                              â”‚ â€¢ View â”‚ â”‚
â”‚                                              â”‚ â€¢ P/E  â”‚ â”‚
â”‚                                              â”‚ â€¢ 3D   â”‚ â”‚
â”‚                                              â”‚ â€¢ â†” â†•  â”‚ â”‚
â”‚                                              â”‚ â€¢ Undo â”‚ â”‚
â”‚                                              â”‚ â€¢ Clearâ”‚ â”‚
â”‚                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ Left Sidebar Panel Structure

```
â”Œâ”€ SETTINGS PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                           â”‚
â”‚  â”Œâ”€ PENCIL MODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 4px â€¢ Colored                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚
â”‚  TOOL                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ âœ Pencil                    P â—€â”‚    â”‚
â”‚  â”‚ â–­ Eraser                    E â—€â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚
â”‚  COLOR (when pencil active)              â”‚
â”‚  â”Œâ”€â”€â”€ â”€â”€â”€ â”€â”€â”€â”                          â”‚
â”‚  â”‚ ğŸ”´ ğŸŸ¢ ğŸ”µ â”‚ (3x2 grid)               â”‚
â”‚  â”‚ ğŸŸ¡ ğŸŸ£ âšª â”‚                          â”‚
â”‚  â””â”€â”€â”€ â”€â”€â”€ â”€â”€â”€â”˜                          â”‚
â”‚                                          â”‚
â”‚  PENCIL WIDTH                            â”‚
â”‚  â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬ 4   px                â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚        â—¯ (preview circle)       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€ â”€ â”€â”                                â”‚
â”‚  â”‚ Sâ”‚ Mâ”‚ Lâ”‚ (quick presets)             â”‚
â”‚  â””â”€ â”€ â”€â”˜                                â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â†¶ Undo                  Ctrl+Z  â”‚    â”‚
â”‚  â”‚ ğŸ—‘ Clear                Ctrl+C  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚
â”‚  KEYBOARD SHORTCUTS                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ P - Pencil                      â”‚    â”‚
â”‚  â”‚ E - Eraser                      â”‚    â”‚
â”‚  â”‚ 1/2/3 - Size                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â—€â–¶ Expand/Collapse Toggle
```

## ğŸ¯ Key Improvements

### Before vs After

| Feature | Before | After |
|---------|--------|-------|
| **Settings Position** | Right side (blocks some canvas) | Left sidebar (non-intrusive) |
| **Can Draw While Settings Visible?** | âŒ No (UI modal) | âœ… Yes (panel on side) |
| **Width Preview** | "12px" text | Visual circle showing exact stroke |
| **Size Selection** | Slider only (tedious) | Slider + S/M/L quick buttons |
| **Color Selection** | Vertical circles | 3x2 grid (more organized) |
| **Keyboard Shortcuts** | None | P/E/V/1/2/3 + Ctrl+Z/Ctrl+C |
| **Status Display** | Inline text | Blue badge: "PENCIL MODE" |
| **Space Saving** | Always visible | Can collapse to nothing |
| **Mobile Friendly** | Limited space | Collapsible, more canvas space |

---

## ğŸ® Typical User Workflows

### Quick Annotation (Keyboard Power User)
```
1. Press P (Pencil tool)
2. Press 1, 2, or 3 (size)
3. Click color in left panel
4. Draw on canvas
5. Press E (Eraser) if need to fix
6. Press Ctrl+Z to undo
```

### Traditional Annotator (Mouse User)
```
1. Click Pencil icon in left panel
2. Click color swatch
3. Click Size preset (M)
4. Draw on canvas
5. Collapse panel for more space (chevron button)
6. Click Undo button when done
```

### 3D Drawing Expert
```
1. Left panel still visible for ref
2. Click pencil3d icon in main toolbar (right side)
3. Draw directly on 3D model
4. Settings in left panel for width adjustment
5. Eraser3d icon removes 3D strokes
```

---

## ğŸ”§ Interaction Details

### Expand/Collapse Animation
- **Duration**: 300ms smooth transition
- **How**: Chevron Up/Down button in main toolbar
- **Width**: Animates from full width â†’ 0
- **Content**: Hidden when collapsed (no pointer events)

### Stroke Preview Circle
- **Updates**: Real-time as slider moves
- **Color**: Shows actual pencil color OR gray for eraser
- **Size**: `min(currentWidth, 60)` to prevent overflow
- **Border**: White/semi-transparent

### Quick Presets
- **Pencil**: S=2px, M=4px, L=8px
- **Eraser**: S=30px, M=60px, L=100px
- **Active State**: Highlighted in blue when selected
- **Click**: Instantly applies size

### Keyboard Handler
```javascript
- Prevents default for tool keys (P/E/V/1/2/3)
- Respects Ctrl/Cmd for undo/clear
- Non-blocking (doesn't prevent typing in text inputs)
- Works while drawing (no focus needed)
```

---

## ğŸ“± Responsive Behavior

### Desktop
- Left panel always accessible
- Full color/size controls visible
- Easy keyboard shortcuts

### Tablet
- Panel collapses by default to maximize canvas
- Large touch targets (48px minimum)
- Gestures supported

### Phone
- Panel collapses by default
- Expanded only when user taps settings
- Full screen for drawing

---

## ğŸš€ Performance Notes
- âœ… CSS transitions (hardware accelerated)
- âœ… No re-renders on width slider movement
- âœ… Keyboard handlers use cleanup
- âœ… All state in parent component (no prop drilling)
- âœ… Lucide icons optimized (SVG inline)

---

## ğŸ¨ Color & Typography

### Colors Used
- **Active Elements**: `bg-blue-600` with `shadow-lg`
- **Inactive Elements**: `bg-white/5` with `text-zinc-300`
- **Accent**: `text-blue-300` or `text-blue-400`
- **Destructive**: `bg-red-500/10` with `text-red-400`
- **Status Badge**: `bg-blue-500/20` with `border-blue-500/50`

### Text Hierarchy
```
Tool Status (header)     â†’ 11px uppercase bold
Section Labels          â†’ 10px uppercase tracking-widest
Button Text            â†’ 14px semibold
Value Display          â†’ 12px mono bold
Keyboard Hints         â†’ 10px mono
Helper Text            â†’ 10px lighter
```

---

## ğŸ”„ State Management

No new global state added - everything flows through props:

```typescript
// Toolbar component internal state:
const [panelExpanded, setPanelExpanded] = useState(true);  // Collapse toggle
const [showPresets, setShowPresets] = useState(false);     // Reserved

// All tool logic remains in App.tsx:
tool               â†’ passed as prop (tool)
color              â†’ passed as prop (color)
pencilWidth        â†’ passed as prop (pencilWidth)
eraserWidth        â†’ passed as prop (eraserWidth)
```

---

## âœ… Testing Scenarios

- [ ] Click pencil, eraser, draw (pen not disabled)
- [ ] Adjust width while panel open
- [ ] Collapse panel and verify canvas full width
- [ ] Keyboard shortcuts (P, E, V, 1, 2, 3)
- [ ] Keyboard undo/clear (Ctrl+Z, Ctrl+C)
- [ ] Stroke preview matches actual stroke size
- [ ] Color changes apply to next stroke
- [ ] Size presets apply instantly
- [ ] Mobile: panel collapses by default
- [ ] Touch: can draw with finger while panel open
